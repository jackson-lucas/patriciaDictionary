/*!
 *patricia - Patricia trie implementation for dictionary
 *Copyright (C) <2014>  <Jackson S. L. Lima>
 *
 *This program is free software: you can redistribute it and/or modify
 *it under the terms of the GNU General Public License as published by
 *the Free Software Foundation, either version 3 of the License, or
 *(at your option) any later version.
 *
 *This program is distributed in the hope that it will be useful,
 *but WITHOUT ANY WARRANTY; without even the implied warranty of
 *MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *GNU General Public License for more details.
 *
 *You should have received a copy of the GNU General Public License
 *along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
!function(e){var o=function(){"use strict";var o={},t={};return o.dictionary={root:{is_word:!1,nextNodes:{}},words_counter:0},o.Node=function(o,t){this.is_word=o==e?!0:o,this.nextNodes=t||{}},o.compareWords=function(e,o){var t,r,n=e.length<o.length?e.length:o.length,s="",i="",c="";for(r=0;n>r&&e.charAt(r)==o.charAt(r);r++);return r?e==o?[0]:(s=e.slice(0,r),i=e.slice(r),c=o.slice(r),t=e==s?1:o==s?2:3,[t,s,i,c]):[-1]},o.fillDictionary=function(t,r){var n,s,i,c,d=!1,r=r||{},a=r.root||o.dictionary.root,u=a.nextNodes,l=r.should_count_words==e?!0:r.should_count_words,N=!1;for(l&&(o.dictionary.words_counter+=t.length),n=0;n<t.length;n++)if(Object.keys(u).length){for(s in u){switch(i=o.compareWords(s,t[n]),i[0]){case-1:N=!0;break;case 0:u[s].is_word=!0,d=!0,N=!1;break;case 1:o.fillDictionary([i[3]],{should_count_words:!1,root:u[s]}),d=!0,N=!1;break;case 2:a.nextNodes[i[1]]=new o.Node,c=a.nextNodes[s],delete a.nextNodes[s],a=a.nextNodes[i[1]],a.nextNodes[i[2]]=c,d=!0,a=r.root||o.dictionary.root,N=!1;break;case 3:a.nextNodes[i[1]]=new o.Node(!1),c=a.nextNodes[s],delete a.nextNodes[s],a=a.nextNodes[i[1]],a.nextNodes[i[2]]=c,a.nextNodes[i[3]]=new o.Node,d=!0,a=r.root||o.dictionary.root,N=!1}if(d){d=!1;break}}N&&(N=!1,u[t[n]]=new o.Node)}else u[t[n]]=new o.Node},t.initialize=function(e){o.fillDictionary(e,{should_count_words:!0})},t.search=function(e,r){var n,s,r=r||{},i=r.root||o.dictionary.root,c=i.nextNodes;for(n in c)switch(s=o.compareWords(n,e),s[0]){case-1:break;case 0:return c[n].is_word;case 1:return t.search(s[3],{root:c[n]});case 2:case 3:return!1}return!1},t.getDictionary=function(){return o.dictionary},t.compareWords=o.compareWords,t}();this.patricia=o}();